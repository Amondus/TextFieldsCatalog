# Тестовый проект

## Overview

Данный проект создан с двумя целями:

* Как площадка для тестирования новых полей ввода
* Как приложение, где можно вживую увидеть применений возможностей полей ввода из библиотеки

**Важно** соблюдать консистентность тестового проекта при изменении полей ввода из библиотеки: изменять код примеров работы с полями при изменении полей, проверять их работу при внесении изменений, а также не забывать добавлять новые поля в Example проект.

## Функциональные требования

* Поддержка версий iOS 10.0 и выше
* Поддерживаемые языки: русский и английский
* Язык: swift 4.2
* Среда разработки: XCode 10.2

## Конфигурация проекта

Для установки всех необходимых утилит достаточно выполнить команду `make init`.

Скрипт установит все необходимые зависимости нужных версий при помощи `bundler`, а также выполнит команду `pod install`.

После выполнения скрипта можно открывать .xcworkspace файл проекта и начинать над ним работу.

**Важно** - возможны проблемы с версией `bundler`, если текущая установленная версия конфликтует с необходимыми для работы проекта гемами. Рекомендуется использовать версию **1.17.1**

Дальнейшее использование Gem зависимостей необходимо выполнять при помощи версий, установленных через `bundler`. Для облегчения работы - на все основные команды написаны обертки, вызывающие их через `bundler`.

Например, CocoaPods зависимости устанавливаются при помощи команды: `make pod`.

Для вывода в консоль всех возможных команд вместе с их описанием - достаточно вызывать команду `make help`.

## Как работать с проектом

### Архитектура

В качестве архитектурного шаблона при написании тестового проекта был выбран Surf MVP 2.0 + Coordinators. Подробнее об обычном Surf MVP можно почитать [здесь](https://github.com/surfstudio/Surf-iOS-Developers/blob/master/Surf_MVP.md), а статья про модификацию с координаторами на данный момент находится в разработке.

### Утилиты

В проекте используются следующие вспомогательные утилиты:

* [SwiftGen](https://github.com/SwiftGen/SwiftGen) - для кодогенерации Asset'ов и локализуемых строк
* [Swiftlint](https://github.com/realm/SwiftLint) - статический анализатор кода
* [Generamba](https://github.com/strongself/Generamba) - кодогенератор для модулей приложения в соответствии с принятым на проекте архитектурным шаблоном

### Локализация

Проект локализован на два языка - русский и английский. **Важно** соблюдать данное правило, чтобы разработчики, говорящие как на русском, так и на английском, могли получить информацию о библиотеке на своем родном языке.

**Перевод на английсий в данный момент не реализован, ожидается в ближайших обновлениях**

### Как добавить поле/обновить поведение существующего

Фактически, для этого не нужно много действий. Для добавление нового поля необходимо сделать следующее:

1) Непосредственно создать поле ввода в проекте TextFieldsCatalog
2) Найти файл `TextFieldType.swift`. Он содержит варианты всех возможных полей ввода в данном каталоге. Так что необходимо добавить новый `case` в уже существующий `enum`, после чего поправить все возникшие ошибки :)
3) В процессе правок ошибок будет необходимо определить название нового поля, дать описание, а также вернуть массив со всеми возможными тестовыми настройками полей ввода - `пресетами`.
4) Каждый пресет содержит некое название, описание, а также имеет метод, позволяющий передать поле ввода и настроить его соответствующим образом. Для большей гибкости был создан протокол `AppliedPreset` - так что каждый пресет должен отвечать этому протоколу. При написании - можно посмотреть на уже существующие реализации.
5) После выполнения всех действий вы увидите свое поле на главном экране, а при тапе на него - откроется экран с возможностью посмотреть текущий пресет и поведение поля ввода при его применении. Также будет кнопка смены пресета, где можно будет выбрать любой другой.

При обновлении полей ввода необходимо внимательно посмотреть на существующий в тестовом проекте код (непосредственное взаимодействие с полями ввода обычно происходит именно в файлах с пресетами), понять, что могло сломаться, поправить существующий код, после чего убедиться, что все работает.